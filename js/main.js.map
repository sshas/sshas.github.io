{"version":3,"file":null,"sources":["../../src/js/models/Device.js","../../src/js/models/Room.js","../../src/js/DeviceManager.js","../../src/js/index.js"],"sourcesContent":["/**\n * Created by steve on 23/09/2016.\n */\n\nconst mapStore = new WeakMap();\n\nexport default class Device {\n  constructor(objDescription) {\n    mapStore.set(this, objDescription);\n  }\n\n  get id() {\n    return mapStore.get(this).id;\n  }\n\n  get name() {\n    return mapStore.get(this).name;\n  }\n\n  get type() {\n    return mapStore.get(this).type;\n  }\n\n  toJSON() {\n    return {\n      id: this.id,\n      name: this.name,\n      type: this.type\n    };\n  }\n}\n","/**\n * Created by steve on 23/09/2016.\n */\nimport Device from './Device';\n\nconst mapStore = new WeakMap();\n\nexport default class Room {\n  constructor(objDescription) {\n    mapStore.set(this, objDescription);\n  }\n\n  get id() {\n    return mapStore.get(this).id;\n  }\n\n  get name() {\n    return mapStore.get(this).name;\n  }\n\n  get devices() {\n    return mapStore.get(this).devices.map(device => new Device(device));\n  }\n\n  toJSON() {\n    return {\n      id: this.id,\n      name: this.name,\n      devices: this.devices\n    };\n  }\n}\n","/**\n * Created by steve on 23/09/2016.\n */\nimport Room from './models/Room';\n\nconst baseUrl = 'http://192.168.1.109:7890';\n\nexport default class DeviceManager {\n\n  constructor() {\n    const searchParams = new URLSearchParams(location.search);\n\n    const room = searchParams.get('room');\n    const device = searchParams.get('device');\n    const command = searchParams.get('command');\n    const dimLevel = searchParams.get('dimLevel');\n\n    if (!!room && !!device && !!command) {\n      this.execCommand(command, room, device, dimLevel);\n    }\n  }\n\n  execCommand(command, room, device, dimLevel) {\n    navigator.sendBeacon(`${baseUrl}/command`, JSON.stringify({\n      command: command,\n      room: room,\n      device: device,\n      dimLevel: dimLevel\n    }));\n  }\n\n  fetch() {\n    const options = {\n      mode: 'cors'\n    };\n\n    if (this.rooms) {\n      return Promise.resolve(this.rooms);\n    }\n\n    return window.fetch(`${baseUrl}/devices`, options)\n      .then(res => res.json())\n      .then((jsonRooms) => {\n        this.rooms = jsonRooms.map(room => new Room(room));\n        return this.rooms;\n      });\n  }\n}\n","/**\n * Created by steve on 22/09/2016.\n */\n// import BiggerImage from '../components/BiggerImage';\nimport DeviceManager from './DeviceManager';\n\nconst deviceManager = new DeviceManager();\n\ndeviceManager.fetch()\n  .then(devices => document.querySelector('#temp').textContent = JSON.stringify(devices, null, 4)) // eslint-disable-line\n  .catch(ex => console.error(ex));\n\n/* eslint-disable */\n\n/**********************  TODO - Some UI  *************************/\n\n\n\n/*if (!window.customElements) {\n alert('Upgrade your browser to view this page');\n throw new Error('Upgrade your browser to view this page');\n }*/\n\n\n/*\ncustomElements.define('bigger-img', BiggerImage, {extends: 'img'});\n\n\nconst image = new BiggerImage(15, 20); // pass ctor values like so.\ndocument.body.appendChild(image);\n\nconst image2 = new BiggerImage(15, 20); // pass ctor values like so.\nimage.width = 15;\ndocument.body.appendChild(image2);*/\n\n"],"names":["mapStore"],"mappings":"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"}